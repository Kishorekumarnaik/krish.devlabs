<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Dashboard | KrishDevLabs</title>
  <link rel="canonical" href="https://krishdevlabs.xyz/dashboard.html" />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet" />
  <style>
    * { box-sizing: border-box; margin: 0; padding: 0; }
    body {
      font-family: 'Inter', sans-serif;
      background: #f6f8fb;
      min-height: 100vh;
      padding-top: 80px;
    }

    nav {
      position: fixed;
      top: 0; left: 0;
      width: 100%; z-index: 1000;
      background: white; backdrop-filter: blur(12px);
      box-shadow: 0 4px 20px rgba(0, 0, 0, 0.06);
      padding: 14px 28px;
      display: flex; justify-content: space-between; align-items: center;
      border-bottom: 1px solid #e5e7eb;
    }

    .nav-logo img { height: 38px; cursor: pointer; transition: transform 0.2s ease; }
    .nav-logo img:hover { transform: scale(1.05); }

   

    .menu-icon { display: none; flex-direction: column; gap: 5px; cursor: pointer; }
    .menu-icon div { width: 24px; height: 3px; background: #4f46e5; border-radius: 2px; transition: all 0.3s ease; }
    .menu-icon.active div:nth-child(1) { transform: translateY(6px) rotate(45deg); }
    .menu-icon.active div:nth-child(2) { opacity: 0; }
    .menu-icon.active div:nth-child(3) { transform: translateY(-6px) rotate(-45deg); }

    .nav-links { display: none; }

    @media (max-width: 768px) {
      .menu-icon { display: flex; }
      .account-name { display: none; }
      .nav-links {
        position: fixed; top: 0; right: -100%;
        height: 100vh; width: 250px;
        background: white;
        display: flex; flex-direction: column;
        padding: 80px 24px;
        box-shadow: -6px 0 16px rgba(0,0,0,0.1);
        transition: right 0.3s ease; z-index: 1001;
      }
      .nav-links.active { right: 0; }
      .nav-links a {
        margin-bottom: 20px;
        font-size: 1.1rem; font-weight: 600;
        color: #1e293b; text-decoration: none;
        transition: color 0.3s;
      }
      .nav-links a:hover { color: #4f46e5; }
    }

    .card-grid {
      display: grid;
      gap: 20px;
      margin-top: 20px;
      grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
    }

    @media (max-width: 768px) {
      .card-grid {
        grid-template-columns: repeat(2, 1fr);
      }
    }

    .dashboard-card {
      height: 180px;
      border-radius: 16px;
      padding: 20px;
      color: white;
      display: flex;
      flex-direction: column;
      justify-content: space-between;
    }

    .card-1 { background: linear-gradient(135deg, #FF512F, #DD2476); }
    .card-2 { background: linear-gradient(135deg, #43cea2, #185a9d); }
    .card-3 { background: linear-gradient(135deg, #f7971e, #ffd200); color: #333; }
    .card-4 { background: linear-gradient(135deg, #7F00FF, #E100FF); }

    .dashboard-card button {
      align-self: flex-start;
      background: rgba(255, 255, 255, 0.2);
      border: none;
      color: white;
      padding: 6px 12px;
      border-radius: 6px;
      cursor: pointer;
      font-size: 13px;
    }
  </style>
</head>
<body>

<nav>
  <div class="nav-logo" onclick="location.href='dashboard.html'">
    <img src="https://i.postimg.cc/Bnbct4pN/Picsart-25-06-09-19-32-03-4761749532394.png" alt="Logo" />
  </div>
 
    <div class="menu-icon" id="menuIcon">
      <div></div><div></div><div></div>
    </div>
  </div>
  <div class="nav-links" id="navLinks">
    <a href="dashboard.html">Dashboard</a>
    <a href="dash-courses.html">Courses</a>
    <a href="dash-my-courses.html">My Courses</a>
    <a href="Course-comesoon.html">Quizzes</a>
    <a href="Community.html">Community</a>
    <a href="My-Account.html">My Account</a>
    <a href="Firebase-auth.html" id="logoutBtn" style="color:#ef4444;">Logout</a>
  </div>
</nav>

<div style="max-width:1000px;margin:auto;padding:20px;">

  <!-- User Info Card -->
  <div style="background:#fff;padding:20px;border-radius:16px;box-shadow:0 6px 20px rgba(0,0,0,0.05);display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;">
    <div>
      <h2 style="font-size:20px;color:#555;margin:0;" id="greetTime">Good Evening,</h2>
      <h1 style="font-size:26px;color:#7225d3;margin:5px 0;" id="userName">User</h1>
      
    </div>
    <div style="position:relative;text-align:center;margin-top:10px;">
      <img src="https://cdn-icons-png.flaticon.com/512/3135/3135715.png" alt="Profile" style="width:80px;height:80px;border-radius:50%;border:4px solid #7225d3;" id="profileImg"/>
      <div style="position:absolute;top:-10px;left:-10px;background:#7225d3;color:white;font-size:11px;padding:4px 10px;border-radius:12px;">STUDENT</div>
    </div>
  </div>

  <!-- Dashboard Cards -->
  <div class="card-grid">
    <div class="dashboard-card card-1">
      <div>
        <h3 style="font-size:24px;" id="earnings">0</h3>
        <p>Quizzes Taken</p>
      </div>
      <a href="#">
  <button>View</button>
</a>

    </div>

    <div class="dashboard-card card-2">
      <div>
        <h3 style="font-size:24px;" id="enrolledCourses">0</h3>
        <p>Enrolled Courses</p>
      </div>
      <a href="dash-my-courses.html">
  <button>View</button>
</a>

    </div>

    <div class="dashboard-card card-3">
      <div>
        <h3 style="font-size:24px;" id="enrollednotes">0</h3>
        <p>Enrolled Notes</p>
      </div>
        <a href="dash-my-courses.html">
  <button>View</button>
</a>
    </div>

    <div class="dashboard-card card-4">
      <div>
        <h3 style="font-size:24px;" id="enrolledBundles">0</h3>
        <p>Enrolled Bundles</p>
      </div>
        <a href="dash-my-courses.html">
  <button>View</button>
</a>
    </div>
  </div>
</div>

<!-- ðŸ‘¥ Our Community Section -->
<section style="margin-top: 40px; background: #ffffff; padding: 40px 20px; border-radius: 16px; box-shadow: 0 6px 20px rgba(0,0,0,0.05); text-align: center;">
  <h2 style="font-size: 24px; color: #1e293b;">Join Our Vibrant Community</h2>
  <p style="color: #64748b; font-size: 14px; margin: 10px 0 20px;">
    Connect, collaborate and grow with thousands of learners and creators at KrishDevLabs.
  </p>
  <div style="display: flex; justify-content: center; gap: 12px; flex-wrap: wrap; margin-bottom: 20px;">
    <img src="https://randomuser.me/api/portraits/men/32.jpg" alt="User" style="width:48px;height:48px;border-radius:50%;">
    <img src="https://randomuser.me/api/portraits/women/44.jpg" alt="User" style="width:48px;height:48px;border-radius:50%;">
    <img src="https://randomuser.me/api/portraits/men/77.jpg" alt="User" style="width:48px;height:48px;border-radius:50%;">
    <img src="https://randomuser.me/api/portraits/women/12.jpg" alt="User" style="width:48px;height:48px;border-radius:50%;">
    <img src="https://randomuser.me/api/portraits/men/25.jpg" alt="User" style="width:48px;height:48px;border-radius:50%;">
  </div>
<a href="Community.html"  style="text-decoration: none;">
  <button style="background:#4f46e5;color:white;padding:10px 20px;border:none;border-radius:8px;cursor:pointer;font-weight:600;">
    Join Our Community
  </button>
</a>
</section>

<!-- ðŸ”» Footer -->
<footer style="margin-top: 60px; background: #1e293b; color: #cbd5e1; padding: 40px 20px; text-align: center;">
  <p style="font-size: 16px; margin-bottom: 12px;">Â© 2025 KrishDevLabs. All rights reserved.</p>
  <div style="display: flex; justify-content: center; gap: 20px; flex-wrap: wrap; font-size: 14px;">
    <a href="#" style="color: #cbd5e1; text-decoration: none;">Privacy Policy</a>
    <a href="#" style="color: #cbd5e1; text-decoration: none;">Terms of Service</a>
    <a href="#" style="color: #cbd5e1; text-decoration: none;">Contact</a>
  </div>
</footer>



<script>
  function updateDashboardCounts() {
    const enrolledCourses = JSON.parse(localStorage.getItem('enrolledCourses') || '[]');

    // Filter based on category
    const freePaidCourses = enrolledCourses.filter(course =>
      course.category?.toLowerCase() === 'free' || course.category?.toLowerCase() === 'paid'
    ).length;

    const enrolledBundles = enrolledCourses.filter(course =>
      course.category?.toLowerCase() === 'bundle'
    ).length;

    const enrolledNotes = enrolledCourses.filter(course =>
      course.category?.toLowerCase() === 'notes'
    ).length;

    const quizzes = JSON.parse(localStorage.getItem("quizzesTaken") || '[]');

    // Update HTML
    document.getElementById("enrolledCourses").textContent = freePaidCourses;
    document.getElementById("enrolledBundles").textContent = enrolledBundles;
    document.getElementById("enrollednotes").textContent = enrolledNotes;
    document.getElementById("earnings").textContent = quizzes.length;
  }

  updateDashboardCounts();
</script>

<script>
  function updateEnrolledCounts() {
    const enrolled = JSON.parse(localStorage.getItem('enrolledCourses') || '[]');

    const courseCount = enrolled.filter(course => {
      const category = course.category?.toLowerCase();
      return category === 'free' || category === 'paid';
    }).length;

    const bundleCount = enrolled.filter(course => {
      return course.category?.toLowerCase() === 'bundle';
    }).length;

    const notesCount = enrolled.filter(course => {
      return course.category?.toLowerCase() === 'notes';
    }).length;

    document.getElementById('enrolledCourses').textContent = courseCount;
    document.getElementById('enrolledBundles').textContent = bundleCount;
    document.getElementById('enrolledNotes').textContent = notesCount;
  }

  updateEnrolledCounts();
</script>

<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/11.10.0/firebase-app.js";
  import { getAuth, onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/11.10.0/firebase-auth.js";
  import { getFirestore, doc, getDoc } from "https://www.gstatic.com/firebasejs/11.10.0/firebase-firestore.js";

  const firebaseConfig = {
    apiKey: "AIzaSyDDTnOATqSbEWwleUOOq1dlGvv9NhFE3GU",
    authDomain: "krishdevlabs-signup.firebaseapp.com",
    projectId: "krishdevlabs-signup",
    storageBucket: "krishdevlabs-signup.appspot.com",
    messagingSenderId: "399199705494",
    appId: "1:399199705494:web:7551f84062f3b5a776e5b7"
  };

  const app = initializeApp(firebaseConfig);
  const auth = getAuth(app);
  const db = getFirestore(app);

  const userName = document.getElementById("userName");
  const profileImg = document.getElementById("profileImg");
  const greetTime = document.getElementById("greetTime");

  const updateCounts = (enrolledData = {}) => {
    let totalCourses = 0;
    let totalNotes = 0;
    let totalBundles = 0;

    for (const course of enrolledData) {
      const category = course.category?.toLowerCase();
      if (category === "free" || category === "paid") totalCourses++;
      else if (category === "notes") totalNotes++;
      else if (category === "bundle" || category === "bundles") totalBundles++;
    }

    document.getElementById("earnings").textContent = "0";
    document.getElementById("enrolledCourses").textContent = totalCourses;
    document.getElementById("enrollednotes").textContent = totalNotes;
    document.getElementById("enrolledBundles").textContent = totalBundles;
  };

  onAuthStateChanged(auth, async (user) => {
    if (user) {
      const name = user.displayName || user.email.split("@")[0] || "User";
      userName.textContent = name;
      profileImg.src = "https://i.imgur.com/4ZQZ4zo.png";

      // ðŸ§  Load enrolledCourses from Firestore
      const userDocRef = doc(db, "users", user.uid);
      const userSnap = await getDoc(userDocRef);

      if (userSnap.exists()) {
        const data = userSnap.data();
        const enrolledCourses = data.enrolledCourses || [];

        // Store in localStorage for consistency
        localStorage.setItem("enrolledCourses", JSON.stringify(enrolledCourses));

        updateCounts(enrolledCourses);
      } else {
        console.log("User data not found in Firestore.");
        updateCounts([]);
      }

    } else {
      window.location.href = "auth.html";
    }
  });

  document.getElementById("logoutBtn").addEventListener("click", async () => {
    await signOut(auth);
    localStorage.clear();
    window.location.href = "auth.html";
  });

  document.getElementById("menuIcon").addEventListener("click", () => {
    document.getElementById("navLinks").classList.toggle("active");
    document.getElementById("menuIcon").classList.toggle("active");
  });

  const hour = new Date().getHours();
  let greet = "Good Evening,";
  if (hour < 12) greet = "Good Morning,";
  else if (hour < 18) greet = "Good Afternoon,";
  greetTime.textContent = greet;
</script>
</body>
</html>








